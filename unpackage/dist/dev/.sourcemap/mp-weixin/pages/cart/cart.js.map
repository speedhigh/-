{"version":3,"sources":["uni-app:///main.js","webpack:///D:/code/muzi-uniapp/pages/cart/cart.vue?a611","webpack:///D:/code/muzi-uniapp/pages/cart/cart.vue?7d98","webpack:///D:/code/muzi-uniapp/pages/cart/cart.vue?c159","webpack:///D:/code/muzi-uniapp/pages/cart/cart.vue?4676","uni-app:///pages/cart/cart.vue","webpack:///D:/code/muzi-uniapp/pages/cart/cart.vue?e8e6"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uEmpty","uButton","uLoadingIcon","uIcon","uNumberBox","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","l1","_self","_c","__map","cartList","shop","index","$orig","__get_orig","l0","productMain","card","cardIdx","g0","Math","round","productMaintbl","iprice","rate","_isMounted","e0","$event","editStatus","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":"6HAAA,KACA,YACA,Y,mDAFmBA,GAAGC,kCAAoCC,EAG1DC,EAAWC,a,gECHX,yHACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,sBACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,OAAQ,WACN,OAAO,mHAITC,QAAS,WACP,OAAO,qHAITC,aAAc,WACZ,OAAO,iIAITC,MAAO,WACL,OAAO,iHAIT,UAAW,WACT,OAAO,qHAITC,WAAY,WACV,OAAO,8HAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,MAAMP,EAAIQ,UAAU,SAASC,EAAMC,GAC9C,IAAIC,EAAQX,EAAIY,WAAWH,GAEvBI,EAAKb,EAAIO,MAAME,EAAKK,aAAa,SAASC,EAAMC,GAClD,IAAIL,EAAQX,EAAIY,WAAWG,GAEvBE,EAAKC,KAAKC,MAAMJ,EAAKK,eAAeC,OAASrB,EAAIsB,KAAO,IAC5D,MAAO,CACLX,MAAOA,EACPM,GAAIA,MAIR,MAAO,CACLN,MAAOA,EACPE,GAAIA,OAIHb,EAAIuB,aACPvB,EAAIwB,GAAK,SAASC,GAChBzB,EAAI0B,YAAc1B,EAAI0B,aAI1B1B,EAAI2B,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACL3B,GAAIA,MAKR4B,GAAmB,EACnBC,EAAkB,GACtBlC,EAAOmC,eAAgB,G,iCC3FvB,8GAAinB,eAAG,G,mfCkKpnB,CACA,KADA,WAEA,OACA,8BACA,WACA,aACA,eACA,YACA,cACA,WACA,cACA,UACA,WACA,cACA,UACA,WAEA,WACA,eAGA,OArBA,WAsBA,gDAEA,OAxBA,WAyBA,gBAEA,OACA,UACA,QADA,SACA,gBACA,mBACA,gBACA,gCACA,mCACA,mCACA,SACA,wBACA,qBACA,+CACA,8DAEA,mBAIA,4FAEA,UAGA,SAEA,QAFA,WAEA,+IACA,wEADA,OACA,EADA,OAEA,iBACA,mCACA,oCACA,uBALA,8CAQA,UAVA,SAUA,cACA,6DACA,mDACA,mFAIA,UAjBA,SAiBA,KACA,4CACA,2CACA,sCACA,8GAGA,SAxBA,WAwBA,WACA,2BACA,mCACA,yBACA,mEAIA,cAhCA,SAgCA,mIACA,sBACA,6BAFA,SAGA,QACA,aACA,qBACA,gDACA,qCAPA,cASA,uBACA,wEACA,KAXA,8CAcA,cA9CA,WA8CA,WACA,yBACA,sHACA,yBAGA,iCAGA,OAvDA,WAuDA,yIACA,QACA,gBACA,gDACA,wBACA,yCALA,cAOA,4BACA,YARA,8CAWA,SAlEA,WAmEA,mCAMA,8CACA,qEANA,kFACA,gD,2ECzRA,8GAA45B,eAAG,G","file":"pages/cart/cart.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/cart/cart.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./cart.vue?vue&type=template&id=0f00adf4&scoped=true&\"\nvar renderjs\nimport script from \"./cart.vue?vue&type=script&lang=js&\"\nexport * from \"./cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cart.vue?vue&type=style&index=0&id=0f00adf4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f00adf4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/cart/cart.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=template&id=0f00adf4&scoped=true&\"","var components\ntry {\n  components = {\n    uEmpty: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-empty/u-empty\" */ \"@/uni_modules/uview-ui/components/u-empty/u-empty.vue\"\n      )\n    },\n    uButton: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-button/u-button\" */ \"@/uni_modules/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uLoadingIcon: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-loading-icon/u-loading-icon\" */ \"@/uni_modules/uview-ui/components/u-loading-icon/u-loading-icon.vue\"\n      )\n    },\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    \"u-Image\": function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u--image/u--image\" */ \"@/uni_modules/uview-ui/components/u--image/u--image.vue\"\n      )\n    },\n    uNumberBox: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-number-box/u-number-box\" */ \"@/uni_modules/uview-ui/components/u-number-box/u-number-box.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l1 = _vm.__map(_vm.cartList, function(shop, index) {\n    var $orig = _vm.__get_orig(shop)\n\n    var l0 = _vm.__map(shop.productMain, function(card, cardIdx) {\n      var $orig = _vm.__get_orig(card)\n\n      var g0 = Math.round(card.productMaintbl.iprice * _vm.rate * 10)\n      return {\n        $orig: $orig,\n        g0: g0\n      }\n    })\n\n    return {\n      $orig: $orig,\n      l0: l0\n    }\n  })\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.editStatus = !_vm.editStatus\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l1: l1\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=script&lang=js&\"","<template>\n\t<view \r\n\t\tclass=\"relative text-sm text-gray-800 bg-gray-100 min-h-screen\"\r\n\t\tstyle=\"padding: 96rpx 0 126rpx 0\"\r\n\t>\r\n\t\t<!-- 缺省页 Empty -->\n\t\t<view v-show=\"showEmpty && !showLoading\">\r\n\t\t\t<u-empty\r\n\t\t\t  mode=\"car\"\r\n\t\t\t  width=\"460rpx\"\r\n\t\t\t\theight=\"460rpx\"\r\n\t\t\t\ttext=\"购物车还是空的\"\r\n\t\t\t\ticon=\"http://cdn.uviewui.com/uview/empty/car.png\"\r\n\t\t\t/>\r\n\t\t\t<navigator url=\"/pages/index/index\" open-type=\"switchTab\" class=\"mx-auto\" style=\"width: 300rpx; margin-top: 50rpx\">\r\n\t\t\t\t<u-button type=\"primary\" shape=\"circle\" text=\"逛逛首页\" color=\"linear-gradient(to right, #ff5d32, #f00f23)\" />\r\n\t\t\t</navigator>\r\n\t\t</view>\r\n\t\t<!-- 加载 Loading -->\r\n\t\t<view v-show=\"showLoading\" class=\"absolute inset-x-0\" style=\"padding: 16rpx; top: 120rpx\" >\r\n\t\t\t<u-loading-icon text=\"加载中,请稍后...\" textSize=\"16\" />\r\n\t\t</view>\r\n\t\t<!-- top -->\r\n\t\t<view v-show=\"showTop\" class=\"fixed top-0 inset-x-0\" style=\"z-index: 999\">\r\n\t\t\t<view\r\n\t\t\t\tclass=\"flex items-center bg-white rounded-b-2xl\" \r\n\t\t\t\tstyle=\"height: 96rpx; padding: 0 32rpx\"\r\n\t\t\t>\r\n\t\t\t\t<view class=\"text-lg font-bold\">购物车</view>\r\n\t\t\t\t<view\r\n\t\t\t\t\tclass=\"ml-auto text-sm\"\r\n\t\t\t\t\tstyle=\"padding: 16rpx\"\r\n\t\t\t\t\t@click=\"editStatus = !editStatus\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{{ editStatus ? '完成': cartList.length > 0 ? '编辑商品' : '' }}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- main -->\r\n\t\t<view v-show=\"!showLoading\">\r\n\t\t\t<view\r\n\t\t\t\tv-for=\"(shop, index) in cartList\"\r\n\t\t\t\t:key=\"index\"\r\n\t\t\t\tclass=\"bg-white rounded-2xl\"\r\n\t\t\t\tstyle=\"padding: 32rpx; margin-top: 28rpx\"\r\n\t\t\t>\r\n\t\t\t\t<!-- 店铺 -->\r\n\t\t\t\t<view class=\"flex items-center\">\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tclass=\"rounded-full flex items-center justify-center\"\r\n\t\t\t\t\t\t:class=\"shop.checkcountry ? 'bg-red-400' : 'bg-white border-red-full'\"\r\n\t\t\t\t\t\tstyle=\"width: 34rpx; height: 34rpx\"\r\n\t\t\t\t\t\t@click=\"checkShop(index)\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<u-icon v-show=\"shop.checkcountry\" size=\"34rpx\" labelSize=\"22rpx\" name=\"checkbox-mark\" color=\"#FFFFFF\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text class=\"text-sm font-bold\" style=\"margin-left: 32rpx\">{{ shop.storename }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view v-for=\"(card, cardIdx) in shop.productMain\" :key=\"card.id\" style=\"margin-top: 32rpx\">\r\n\t\t\t\t\t<view class=\"flex ites-stretch\">\r\n\t\t\t\t\t\t<view class=\"flex-shrink-0 flex items-center\">\r\n\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\tclass=\"rounded-full flex items-center justify-center\"\r\n\t\t\t\t\t\t\t\t:class=\"card.check ? 'bg-red-400' : 'bg-white border-red-full'\"\r\n\t\t\t\t\t\t\t\tstyle=\"width: 34rpx; height: 34rpx\"\r\n\t\t\t\t\t\t\t\t@click=\"checkDrug(index, cardIdx)\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<u-icon v-show=\"card.check\" size=\"34rpx\" labelSize=\"22rpx\" name=\"checkbox-mark\" color=\"#FFFFFF\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<view class=\"flex-shrink-0\" style=\"margin-left: 32rpx; width: 200rpx; height: 200rpx\">\r\n\t\t\t\t\t\t\t<u--image :src=\"card.simage1\" width=\"200rpx\" height=\"200rpx\" radius=\"5\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"flex-grow\" style=\"margin-left: 24rpx\">\r\n\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\tclass=\"line-2\" style=\"height: 80rpx; line-height: 40rpx\"\r\n\t\t\t\t\t\t\t\t:class=\"card.productMaintbl.icount === 0 ? 'text-gray-500':''\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{{ card.stitle }}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view \r\n\t\t\t\t\t\t\t\tclass=\"text-lg\" style=\"margin-top: 4rpx\"\r\n\t\t\t\t\t\t\t\t:class=\"card.productMaintbl.icount === 0 ? 'text-red-300':'text-red-400'\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{{ card.productMaintbl.iprice }}\r\n\t\t\t\t\t\t\t\t<span class=\"text-xs\" style=\"margin-right: 4rpx\">港币</span>\r\n\t\t\t\t\t\t\t\t<span class=\"text-xs text-gray-500\">约{{ Math.round(card.productMaintbl.iprice * rate * 10) / 10 }}元</span>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"flex items-center\" style=\"margin-top: 8rpx\">\r\n\t\t\t\t\t\t\t\t<u-number-box\r\n\t\t\t\t\t\t\t\t\tv-model=\"cartList[index].productMain[cardIdx].icount\"\r\n\t\t\t\t\t\t\t\t\t:name=\"card.id\"\r\n\t\t\t\t\t\t\t\t\t:disabled=\"disabled.stepper\"\r\n\t\t\t\t\t\t\t\t\tbutton-size=\"56rpx\"\r\n\t\t\t\t\t\t\t\t\t:max=\"999\"\r\n\t\t\t\t\t\t\t\t\tinteger\r\n\t\t\t\t\t\t\t\t  @change=\"changeStepper\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\t\tv-if=\"card.productMaintbl.icount === 0\"\r\n\t\t\t\t\t\t\t\t\tclass=\"text-xs text-gray-600 ml-auto\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t已售罄\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- submit-bar -->\r\n\t\t<view\r\n\t\t\tv-show=\"!showLoading && !showEmpty\" \r\n\t\t\tclass=\"fixed bottom-0 inset-x-0 bg-white u-border-top flex items-center\"\r\n\t\t\tstyle=\"height: 98rpx; z-index: 999; padding: 0 32rpx\"\r\n\t\t>\r\n\t\t\t<!-- checked -->\r\n\t\t\t<view class=\"flex-shrink-0 flex items-center\" @click=\"checkAll\">\r\n\t\t\t\t<view\r\n\t\t\t\t\tclass=\"rounded-full flex items-center justify-center\"\r\n\t\t\t\t\t:class=\"checked ? 'bg-red-400' : 'bg-white border-red-full'\"\r\n\t\t\t\t\tstyle=\"width: 34rpx; height: 34rpx\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<u-icon v-show=\"checked\" size=\"34rpx\" labelSize=\"22rpx\" name=\"checkbox-mark\" color=\"#FFFFFF\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"text-gray-600\" style=\"margin-left: 8rpx\">全选</text>\r\n\t\t\t</view>\r\n\t\t\t<!-- right -->\r\n\t\t\t<view v-show=\"!editStatus\" class=\"ml-auto flex items-center\">\r\n\t\t\t\t<view style=\"margin-right: 8rpx\">合计:</view>\r\n\t\t\t\t<view class=\"text-red-400 text-xs\">HK$ <text class=\"text-lg\">{{ totalPrice }}</text></view>\r\n\t\t\t\t<button \r\n\t\t\t\t\tclass=\"text-white text-sm rounded-full buy-btn\"\r\n\t\t\t\t\t:disabled=\"disabled.submit\"\r\n\t\t\t\t\t@click=\"onSubmit\"\r\n\t\t\t\t>\r\n\t\t\t\t\t去结算({{ totalNum }})\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t\t<view v-show=\"editStatus\" class=\"ml-auto flex items-center\">\r\n\t\t\t\t<button\r\n\t\t\t\t\tplain\r\n\t\t\t\t\t:disabled=\"disabled.collection\"\r\n\t\t\t\t\tclass=\"rounded-full text-sm collection-btn\"\r\n\t\t\t\t>\r\n\t\t\t\t\t移入收藏夹\r\n\t\t\t\t</button>\r\n\t\t\t\t<button \r\n\t\t\t\t\tclass=\"rounded-full text-sm bg-red-400 text-white delete-btn\"\r\n\t\t\t\t\t:disabled=\"disabled.delete\"\r\n\t\t\t\t\t@click=\"deleteProduct\"\r\n\t\t\t\t>\r\n\t\t\t\t\t删除\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\trate: uni.getStorageSync('rate'),\r\n\t\t\t\tshowTop: false,  // 一开始不显示，当列表不为空时显示\n\t\t\t\tshowEmpty: false,\r\n\t\t\t\tshowLoading: true,\r\n\t\t\t\tcartList: [],\r\n\t\t\t\tchoiceList: [],\r\n\t\t\t\tchecked: false,\r\n\t\t\t\teditStatus: false,\r\n\t\t\t\tdisabled: {\r\n\t\t\t\t\tstepper: false,\r\n\t\t\t\t\tcollection: true,\r\n\t\t\t\t\tdelete: true,\r\n\t\t\t\t\tsubmit: true\r\n\t\t\t\t},\r\n\t\t\t\ttotalNum: 0,\r\n\t\t\t\ttotalPrice: 0\n\t\t\t}\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tif(!uni.getStorageSync('token')) this.showEmpty = true\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.getList()\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tcartList: {\r\n\t\t\t\thandler(item,index) {\r\n\t\t\t\t\tthis.choiceList = []\r\n\t\t\t\t\tthis.checked = true\r\n\t\t\t\t\tthis.totalNum = this.totalPrice = 0\r\n\t\t\t\t\tthis.cartList.forEach((item) => {\r\n\t\t\t\t\t\titem.productMain.forEach((i) => {\r\n\t\t\t\t\t\t\tif(i.check) {\r\n\t\t\t\t\t\t\t\tthis.choiceList.push(i.id)\r\n\t\t\t\t\t\t\t\tthis.totalNum += i.icount\r\n\t\t\t\t\t\t\t\tthis.totalPrice += i.productMaintbl.iprice * i.icount\r\n\t\t\t\t\t\t\t\tthis.disabled.delete = this.disabled.submit = this.disabled.collection = false\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.checked = false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif(this.totalNum === 0) this.disabled.delete = this.disabled.submit = this.disabled.collection = true\r\n\t\t\t\t},\r\n\t\t\t\tdeep: true // 深度监听父组件传过来对象变化\r\n\t\t\t}\r\n\t\t},\n\t\tmethods: {\r\n\t\t\t// 获取列表\n\t\t\tasync getList() {\r\n\t\t\t\tconst res = await this.$api({url: '/cart/getList', data: { userid: uni.getStorageSync('user').id }})\r\n\t\t\t\tthis.showLoading = false\r\n\t\t\t\tthis.showEmpty = res.data.data.length === 0\r\n\t\t\t\tthis.showTop = !(res.data.data.length === 0)\r\n\t\t\t\tthis.cartList = res.data.data\r\n\t\t\t},\r\n\t\t\t// 选择店铺\r\n\t\t\tcheckShop(sIdx) {\r\n\t\t\t\tthis.cartList[sIdx].checkcountry = !this.cartList[sIdx].checkcountry\r\n\t\t\t\tthis.cartList[sIdx].productMain.forEach(item => {\r\n\t\t\t\t\tif(item.productMaintbl.icount > 0 || this.editStatus) { item.check = this.cartList[sIdx].checkcountry }\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 选择药品\r\n\t\t\tcheckDrug(sIdx, cIdx) {\r\n\t\t\t\tlet dValue = this.cartList[sIdx].productMain[cIdx].check\r\n\t\t\t\tdValue = this.cartList[sIdx].productMain[cIdx].check = !dValue\r\n\t\t\t\tif(!dValue) this.cartList[sIdx].checkcountry = false\r\n\t\t\t\tif(dValue && this.cartList[sIdx].productMain.every(item => item.check === true)) this.cartList[sIdx].checkcountry = true\r\n\t\t\t},\r\n\t\t\t// 全选\r\n\t\t\tcheckAll() {\r\n\t\t\t\tthis.checked = !this.checked\r\n\t\t\t\tthis.cartList.forEach(item => {\r\n\t\t\t\t\titem.checkcountry = this.checked\r\n\t\t\t\t\titem.productMain.forEach(i => i.check = this.checked)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 切换数量\r\n\t\t\tasync changeStepper(stepper) {\r\n\t\t\t\tthis.disabled.stepper = true\r\n\t\t\t\tuni.showLoading({title: '加载中'})\r\n\t\t\t\tconst res = await this.$api({\r\n\t\t\t\t\tmethod: 'PUT',\r\n\t\t\t\t\turl: '/cart/putcount', \r\n\t\t\t\t\tcontentType: 'application/x-www-form-urlencoded', \r\n\t\t\t\t\tdata: { cartid: stepper.name, count:stepper.value }\r\n\t\t\t\t})\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.showToast({ title:'成功！', complete: () => {this.disabled.stepper = false}})\r\n\t\t\t\t}, 300)\r\n\t\t\t},\r\n\t\t\t// 删除商品\r\n\t\t\tdeleteProduct() {\r\n\t\t\t\tif(this.choiceList.length > 0) {\r\n\t\t\t\t\tuni.showModal({ content: '确认删除选中的商品吗？', cancelText: '我再想想', cancelColor: '#999999', confirmColor:'#F03E38', success:(res) => {\r\n\t\t\t\t\t\tif(res.confirm) this.delete()\r\n\t\t\t\t\t}})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({ title: '当前没有选择商品'})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync delete() {\r\n\t\t\t\tconst res = await this.$api({\r\n\t\t\t\t\tmethod: 'DELETE',\r\n\t\t\t\t\tcontentType: 'application/x-www-form-urlencoded',\r\n\t\t\t\t\turl: '/cart/deleteBatch',\r\n\t\t\t\t\tdata: { cartids: this.choiceList.toString()}\r\n\t\t\t\t})\r\n\t\t\t\tuni.showToast({ title: '删除成功'})\r\n\t\t\t\tthis.getList()\r\n\t\t\t},\r\n\t\t\t// 去结算\r\n\t\t\tonSubmit() {\r\n\t\t\t\tif(uni.getStorageSync('shiming') === '0') {\r\n\t\t\t\t\tuni.showModal({ title: '您还未实名认证，请先完善信息喲', icon: 'fail', showCancel: false, success: () => {\r\n\t\t\t\t\t\tuni.navigateTo({ url: '/subpages/info/info' })\r\n\t\t\t\t\t}})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tuni.setStorageSync('orderList', this.choiceList)\r\n\t\t\t\tuni.navigateTo({ url: '/subpages/confirmorder/confirmorder?from=cart' })\r\n\t\t\t}\n\t\t}\n\t}\n</script>\r\n\r\n<style scoped>\r\n\t.border-red-full {\r\n\t\tborder: 1px solid #CCCCCC\r\n\t}\r\n\t.buy-btn {\r\n\t\tmin-width: 200rpx; margin-left: 16rpx; background: linear-gradient(to right, #ff5d32, #f00f23)\r\n\t}\r\n\t.buy-btn[disabled] {\r\n\t\tmin-width: 200rpx; margin-left: 16rpx; background: linear-gradient(to right, #FFC3B3, #F7828C); color: #FFFFFF;\r\n\t}\r\n\t.collection-btn[disabled] {\r\n\t\tcolor: #CCCCCC; border: 1px solid #CCCCCC\r\n\t}\r\n\t.delete-btn {\r\n\t\tmargin-left: 20rpx\r\n\t}\r\n\t.delete-btn[disabled] {\r\n\t\tmargin-left: 20rpx; background-color: #FCA5A5; color: #FFFFFF;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=style&index=0&id=0f00adf4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./cart.vue?vue&type=style&index=0&id=0f00adf4&scoped=true&lang=css&\""],"sourceRoot":""}